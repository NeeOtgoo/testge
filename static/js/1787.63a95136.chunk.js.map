{"version":3,"file":"static/js/1787.63a95136.chunk.js","mappings":"yWAaMA,GAASC,EAAAA,EAAAA,IAAG,oXAmBLC,EAAY,SAAAC,GACxB,IAAIC,GAAUC,EAAAA,EAAAA,MAEd,GAA0BC,EAAAA,EAAAA,YAAWC,EAAAA,GAA7BC,EAAI,EAAJA,KAAMC,EAAO,EAAPA,QACRC,EAAQC,aAAaC,QAAQC,EAAAA,IACnC,GAAsCC,EAAAA,EAAAA,WAAS,GAAM,eAA9CC,EAAW,KAAEC,EAAc,KAUlC,OAA+BC,EAAAA,EAAAA,GAAYjB,EAAQ,CAClDkB,YAAa,SAAAC,GACZ,IACM,IADEA,EAAKC,UAAUC,QAErBC,EAAAA,GAAAA,QAAgB,kHAChBX,aAAaY,QAAQV,EAAAA,GAAYM,EAAKC,UAAUV,OAChDD,SATHO,GAAe,EAef,IACC,eAbKQ,EAAO,KAAIC,EAAO,KAAPA,QA2BlB,OAZGV,GACFW,YAAW,WAvBXV,GAAe,EAyBf,GAAG,MAGJW,EAAAA,EAAAA,YAAU,WACLjB,GAASF,GACZJ,EAAQwB,KAAK,YAEf,GAAG,CAACpB,EAAME,EAAON,KAGhB,iCACC,SAAC,SAAU,CACVyB,QAAS,CAAEC,QAAS,EAAGC,aAAc,GACrCC,QAAS,CACRF,QAASf,EAAc,EAAI,EAC3BgB,aAAchB,EAAc,GAAK,GAChC,UACF,SAAC,IAAK,CAACkB,KAAK,QAAQC,UAAQ,EAACZ,SAAS,SAACa,EAAA,EAAW,CAACC,GAAG,oBAEvD,UAAC,IAAI,CACJC,OAAO,WACPC,KAAK,aACLC,SAAU,SAAAC,GACThB,EAAQ,CAAEiB,UAAW,CAAEC,SAAUF,EAAEE,SAAUC,SAAUH,EAAEG,WAC1D,EAAE,WAEF,SAAC,SAAS,CACTL,KAAK,WACLM,OAAO,SAACT,EAAA,EAAW,CAACC,GAAG,aACvBS,MAAO,CACN,CACCC,UAAU,EACVxB,QAAS,0HAET,UACF,SAAC,IAAK,CAACyB,QAAQ,SAACC,EAAA,EAAY,CAACC,UAAU,sBAExC,SAAC,SAAS,CACTX,KAAK,WACLM,OACC,0BACC,2BAAM,SAACT,EAAA,EAAW,CAACC,GAAG,iBAGxBS,MAAO,CACN,CACCC,UAAU,EACVxB,QAAS,kGAET,UAEF,SAAC,aAAc,CAACyB,QAAQ,SAACG,EAAA,EAAY,CAACD,UAAU,sBAEjD,SAAC,SAAS,WACT,UAAC,IAAM,CAAChB,KAAK,UAAUkB,SAAS,SAASC,OAAK,EAAC3B,QAASA,EAAQ,eAAE,SAACU,EAAA,EAAW,CAACC,GAAG,yBAKvF,EAWAlC,EAAUmD,aAAe,CACxBC,aAAa,EACbC,oBAAoB,GAGrB,Q,UC3EA,EA5Dc,WAEZ,IAAQC,GAAeC,EAAAA,EAAAA,KAAfD,WAER,OACE,gBAAKP,UAAU,mEAAkE,UAC/E,gBACEA,WAAWS,EAAAA,EAAAA,IACT,iEACA,yPACA,uOACA,UAEF,gBAAKT,UAAU,mCAAkC,UAC/C,iBAAKA,UAAU,kCAAiC,WAC9C,iBAAKA,UAAU,uCAAsC,WACnD,cAAGU,KAAK,GAAGV,UAAU,kCAAiC,UACpD,gBACEW,IAAI,2OACJX,UAAU,OACVY,IAAKL,EAAWM,UAGpB,iBAAKb,UAAU,UAAS,WACtB,gBACEW,IAAI,2OACJX,UAAU,wBACVY,IAAI,oBAEN,gBAAKZ,UAAU,+DAA8D,4HAKjF,gBAAKA,UAAU,qDAAoD,UACjE,iBAAKA,UAAU,2JAA0J,WACvK,gBACEW,IAAI,2OACJX,UAAU,oBACVY,IAAKL,EAAWM,QAElB,SAAC,EAAS,KACV,iBAAKb,UAAU,iEAAgE,WAC7E,cAAGA,UAAU,gBAAgBU,KAAK,GAAE,2HAE/B,IAAG,IACN,KACF,cAAGV,UAAU,gBAAgBU,KAAK,GAAE,+HAWtD,C","sources":["views/auth-views/components/LoginForm.js","views/auth-views/authentication/login/index.js"],"sourcesContent":["import React, { useContext, useEffect, useState } from 'react';\nimport { Button, Form, Input, Alert, message } from \"antd\";\nimport { UserOutlined, LockOutlined } from '@ant-design/icons';\nimport PropTypes from 'prop-types';\nimport {\n\tAUTH_TOKEN,\n} from 'redux/constants/Auth';\nimport { useHistory } from \"react-router-dom\";\nimport { motion } from \"framer-motion\"\nimport { gql, useMutation } from '@apollo/client';\nimport IntlMessage from 'components/util-components/IntlMessage';\nimport { UserContext } from 'hooks/UserContextProvider';\n\nconst LOG_IN = gql`\n    mutation tokenAuth($username: String!, $password: String!){\n        tokenAuth(username: $username, password: $password) {\n\t\t\tsuccess,\n\t\t\terrors,\n\t\t\tunarchiving,\n\t\t\ttoken,\n\t\t\t# refreshToken,\n\t\t\tunarchiving,\n\t\t\tuser {\n\t\t\t\tid,\n\t\t\t\tfirstName,\n\t\t\t\tlastName,\n\t\t\t\tusername,\n\t\t\t}\n        }\n    }\n`;\n\nexport const LoginForm = props => {\n\tlet history = useHistory();\n\n\tconst { user, refetch } = useContext(UserContext);\n\tconst token = localStorage.getItem(AUTH_TOKEN);\n\tconst [showMessage, setShowMessage] = useState(false)\n\n\tfunction hideAuthMessage() {\n\t\tsetShowMessage(false)\n\t}\n\n\tfunction showAuthMessage() {\n\t\tsetShowMessage(true)\n\t}\n\n\tconst [onLogin, { loading }] = useMutation(LOG_IN, {\n\t\tonCompleted: data => {\n\t\t\tswitch (data.tokenAuth.success) {\n\t\t\t\tcase true:\n\t\t\t\t\tmessage.success('Амжилттай нэвтэрлээ!')\n\t\t\t\t\tlocalStorage.setItem(AUTH_TOKEN, data.tokenAuth.token);\n\t\t\t\t\trefetch()\n\t\t\t\t\tbreak;\n\t\t\t\tdefault:\n\t\t\t\t\tshowAuthMessage();\n\t\t\t\t\tbreak;\n\t\t\t}\n\t\t}\n\t});\n\n\tif(showMessage) {\n\t\tsetTimeout(() => {\n\t\t\thideAuthMessage();\n\t\t}, 3000);\n\t}\n\n\tuseEffect(() => {\n\t\tif (token && user) {\n\t\t\thistory.push('/app/home')\n\t\t}\n\t}, [user, token, history])\n\n\treturn (\n\t\t<>\n\t\t\t<motion.div \n\t\t\t\tinitial={{ opacity: 0, marginBottom: 0 }} \n\t\t\t\tanimate={{ \n\t\t\t\t\topacity: showMessage ? 1 : 0,\n\t\t\t\t\tmarginBottom: showMessage ? 20 : 0 \n\t\t\t\t}}> \n\t\t\t\t<Alert type=\"error\" showIcon message={<IntlMessage id=\"login-fail\" />}></Alert>\n\t\t\t</motion.div>\n\t\t\t<Form \n\t\t\t\tlayout=\"vertical\" \n\t\t\t\tname=\"login-form\"\n\t\t\t\tonFinish={e => {\n\t\t\t\t\tonLogin({ variables: { username: e.username, password: e.password } });\n\t\t\t\t}}\n\t\t\t>\n\t\t\t\t<Form.Item \n\t\t\t\t\tname=\"username\" \n\t\t\t\t\tlabel={<IntlMessage id=\"username\" />}\n\t\t\t\t\trules={[\n\t\t\t\t\t\t{ \n\t\t\t\t\t\t\trequired: true,\n\t\t\t\t\t\t\tmessage: 'Нэвтрэх нэр оруулна уу',\n\t\t\t\t\t\t}\n\t\t\t\t\t]}>\n\t\t\t\t\t<Input prefix={<UserOutlined className=\"text-primary\" />}/>\n\t\t\t\t</Form.Item>\n\t\t\t\t<Form.Item \n\t\t\t\t\tname=\"password\" \n\t\t\t\t\tlabel={\n\t\t\t\t\t\t<div>\n\t\t\t\t\t\t\t<span><IntlMessage id=\"password\" /></span>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t} \n\t\t\t\t\trules={[\n\t\t\t\t\t\t{ \n\t\t\t\t\t\t\trequired: true,\n\t\t\t\t\t\t\tmessage: 'Нууц үг оруулна уу',\n\t\t\t\t\t\t}\n\t\t\t\t\t]}\n\t\t\t\t>\n\t\t\t\t\t<Input.Password prefix={<LockOutlined className=\"text-primary\" />}/>\n\t\t\t\t</Form.Item>\n\t\t\t\t<Form.Item>\n\t\t\t\t\t<Button type=\"primary\" htmlType=\"submit\" block loading={loading}> <IntlMessage id=\"main.login\" /></Button>\n\t\t\t\t</Form.Item>\n\t\t\t</Form>\n\t\t</>\n\t)\n}\n\nLoginForm.propTypes = {\n\totherSignIn: PropTypes.bool,\n\tshowForgetPassword: PropTypes.bool,\n\textra: PropTypes.oneOfType([\n\t\tPropTypes.string,\n\t\tPropTypes.element\n\t]),\n};\n\nLoginForm.defaultProps = {\n\totherSignIn: true,\n\tshowForgetPassword: false\n};\n\nexport default LoginForm\n","import useDomain from \"hooks/useDomain\";\nimport React from \"react\";\nimport LoginForm from \"views/auth-views/components/LoginForm\";\nimport { classNames } from \"utils\";\n\nconst Login = () => {\n\n  const { domainData } = useDomain()\n\n  return (\n    <div className=\"min-h-screen overflow-hidden px-3 pt-2 bg-emind xl:bg-background\">\n      <div\n        className={classNames(\n          \"-m-2 sm:-mx-8 p-3 sm:px-8 relative h-screen lg:overflow-hidden\",\n          \"before:hidden before:xl:block before:content-[''] before:w-[57%] before:-mt-[28%] before:-mb-[16%] before:-ml-[13%] before:absolute before:inset-y-0 before:left-0 before:transform before:rotate-[-4.5deg] before:bg-emind-2/20 before:rounded-[100%]\",\n          \"after:hidden after:xl:block after:content-[''] after:w-[57%] after:-mt-[20%] after:-mb-[13%] after:-ml-[13%] after:absolute after:inset-y-0 after:left-0 after:transform after:rotate-[-4.5deg] after:bg-emind after:rounded-[100%]\",\n        )}\n      >\n        <div className=\"container relative z-10 sm:px-10\">\n          <div className=\"block grid-cols-2 gap-4 xl:grid\">\n            <div className=\"flex-col hidden min-h-screen xl:flex\">\n              <a href=\"\" className=\"flex items-center pt-5 -intro-x\">\n                <img\n                  alt=\"Emind сургуулийн өмнөх насны боловсролын систем\"\n                  className=\"w-20\"\n                  src={domainData.logo}\n                />\n              </a>\n              <div className=\"my-auto\">\n                <img\n                  alt=\"Emind сургуулийн өмнөх насны боловсролын систем\"\n                  className=\"w-1/2 -mt-16 -intro-x\"\n                  src='/img/login.svg'\n                />\n                <div className=\"mt-10 text-3xl font-medium leading-tight text-white -intro-x\">\n                  Тэнгэрийн сургууль\n                </div>\n              </div>\n            </div>\n            <div className=\"flex h-screen py-5 my-10 xl:h-auto xl:py-0 xl:my-0\">\n              <div className=\"w-full px-5 py-8 bg-background mx-auto my-auto rounded-md shadow-md xl:ml-20 xl:bg-transparent sm:px-8 xl:p-0 xl:shadow-none sm:w-3/4 lg:w-2/4 xl:w-auto\">\n                <img\n                  alt=\"Emind сургуулийн өмнөх насны боловсролын систем\"\n                  className=\"w-44 mx-auto my-4\"\n                  src={domainData.logo}\n                />\n                <LoginForm />\n                <div className=\"mt-10 text-center intro-x xl:mt-24 text-slate-600 xl:text-left\">\n                  <a className=\"text-primary \" href=\"\">\n                    Үйлчилгээний нөхцөл\n                  </a>{\" \"}\n                  &{\" \"}\n                  <a className=\"text-primary \" href=\"\">\n                    Нууцлалын бодлого\n                  </a>\n                </div>\n              </div>\n            </div>\n          </div>\n        </div>\n      </div>\n    </div>\n  );\n};\n\nexport default Login;\n"],"names":["LOG_IN","gql","LoginForm","props","history","useHistory","useContext","UserContext","user","refetch","token","localStorage","getItem","AUTH_TOKEN","useState","showMessage","setShowMessage","useMutation","onCompleted","data","tokenAuth","success","message","setItem","onLogin","loading","setTimeout","useEffect","push","initial","opacity","marginBottom","animate","type","showIcon","IntlMessage","id","layout","name","onFinish","e","variables","username","password","label","rules","required","prefix","UserOutlined","className","LockOutlined","htmlType","block","defaultProps","otherSignIn","showForgetPassword","domainData","useDomain","classNames","href","alt","src","logo"],"sourceRoot":""}